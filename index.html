<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#2c3e50">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Francisco Running - Temps de passage</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: #ecf0f1; min-height:100vh; padding:20px;
}
.container { max-width:650px; margin:0 auto; background:white; border-radius:12px; padding:30px; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
.header { display:flex; align-items:center; justify-content:center; gap:12px; margin-bottom:30px; padding-bottom:20px; border-bottom:2px solid #ecf0f1; }
.header .runner-icon { font-size:32px; }
.header h1 { color:#2c3e50; font-size:24px; font-weight:600; }
.section { margin-bottom:30px; }
.section-title { color:#2c3e50; font-size:18px; font-weight:600; margin-bottom:15px; }
.input-row { display:flex; gap:10px; margin-bottom:15px; }
.input-group { flex:1; position:relative; }
label { display:block; margin-bottom:6px; color:#34495e; font-weight:500; font-size:14px; }
.helper-text { display:block; margin-bottom:6px; color:#7f8c8d; font-size:11px; font-style:italic; }
select, input[type="number"], input[type="text"] {
  width:100%; padding:12px; border:1px solid #bdc3c7; border-radius:12px;
  font-size:16px; background:white;
}
select:focus, input:focus { outline:none; border-color:#3498db; }

.custom-distance { display:none; margin-top:10px; }

button {
  width:100%; padding:14px; background:#2c3e50; color:white; border:none; border-radius:12px;
  font-size:16px; font-weight:500; cursor:pointer; margin-top:10px; transition:0.2s;
}
button:hover { background:#34495e; }
button.secondary {
  background: #95a5a6;
  margin-top: 10px;
}
button.secondary:hover { background: #7f8c8d; }

/* Styles pour les boutons CTA */
.cta-buttons {
  display: flex;
  gap: 10px;
  margin-top: 20px;
  padding-top: 20px;
  border-top: 2px solid #ecf0f1;
}
button.cta-instagram {
  background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
  flex: 1;
}
button.cta-instagram:hover {
  background: linear-gradient(45deg, #e08323 0%, #d6582c 25%, #cc1733 50%, #bc1356 75%, #ac0878 100%);
}
button.cta-email {
  background: #27ae60;
  flex: 1;
}
button.cta-email:hover {
  background: #229954;
}

.results { display:none; margin-top:30px; }
.results.show { display:block; }

.race-info {
  background: linear-gradient(135deg,#2c3e50 0%,#34495e 100%);
  color: white;
  padding: 20px;
  border-radius: 8px;
  margin-bottom: 20px;
  text-align: center;
}
.race-info-distance { 
  font-size: 14px; 
  opacity: 0.9;
  margin-bottom: 8px;
}
.race-info-time { 
  font-size: 36px; 
  font-weight: 700;
  margin-bottom: 5px;
}
.race-info-pace { 
  font-size: 16px; 
  opacity: 0.9;
}

.split-times { background:#f8f9fa; padding:20px; border-radius:8px; border:1px solid #e0e0e0; }
.split-times h3 { color:#2c3e50; font-size:16px; margin-bottom:15px; font-weight:600; text-align:center; }

.split-header {
  display:grid; 
  grid-template-columns:100px 1fr 110px; 
  gap:12px; 
  padding:10px 0;
  border-bottom:2px solid #bdc3c7;
  margin-bottom:5px;
}
.split-header-item {
  color:#5a6c7d;
  font-weight:600;
  font-size:12px;
  text-align:center;
  text-transform:uppercase;
  letter-spacing:0.5px;
}

.split-item { 
  display:grid; 
  grid-template-columns:100px 1fr 110px; 
  gap:12px; 
  padding:12px 0; 
  border-bottom:1px solid #e0e0e0; 
  align-items:center; 
}
.split-item:last-child { border-bottom:none; }
.split-distance { color:#5a6c7d; font-weight:600; font-size:14px; text-align:center; }
.split-time { color:#2c3e50; font-weight:600; font-size:15px; text-align:center; }
.split-arrival { color:#27ae60; font-weight:600; font-size:14px; text-align:center; }

/* Styles pour les menus d√©roulants de temps */
.time-input-container {
  display: flex;
  gap: 8px;
  align-items: center;
}
.time-input-group {
  flex: 1;
  display: flex;
  flex-direction: column;
}
.time-input-label {
  font-size: 11px;
  color: #7f8c8d;
  margin-bottom: 4px;
  font-weight: 500;
  text-align: center;
}
.time-select {
  width: 100%;
  padding: 12px 8px;
  text-align: center;
  border: 1px solid #bdc3c7;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  background: white;
  cursor: pointer;
}
.time-separator {
  font-size: 24px;
  color: #7f8c8d;
  font-weight: 600;
  padding-top: 20px;
}

.error-message {
  background: #e74c3c;
  color: white;
  padding: 15px;
  border-radius: 8px;
  margin-top: 15px;
  text-align: center;
  font-weight: 500;
  display: none;
}
.error-message.show {
  display: block;
}

.start-time-section {
  background: #e8f5e9;
  padding: 12px 15px 15px 15px;
  border-radius: 8px;
  margin-bottom: 15px;
  border: 1px solid #c8e6c9;
}

/* Responsive Mobile */
@media(max-width:768px){ 
  .container{padding:20px; max-width:100%;} 
  .input-row{flex-direction:column;} 
  
  /* Boutons CTA en colonne sur mobile */
  .cta-buttons {
    flex-direction: column;
  }
  
  /* En-t√™tes sur mobile - grille 3 colonnes */
  .split-header{
    display:grid; 
    grid-template-columns:1fr 1fr 1fr; 
    gap:8px; 
    padding:8px 0;
    border-bottom:2px solid #bdc3c7;
  }
  .split-header-item{
    text-align:center; 
    font-size:11px;
    padding:4px;
  }
  
  /* Items sur mobile - grille 3 colonnes */
  .split-item{
    display:grid; 
    grid-template-columns:1fr 1fr 1fr; 
    gap:6px; 
    padding:8px 0;
    border-bottom:1px solid #e0e0e0;
  } 
  
  .split-distance { 
    text-align:center; 
    font-size:12px;
    padding:8px 4px;
    background:#ecf0f1;
    border-radius:6px;
  }
  .split-time { 
    text-align:center; 
    font-size:13px;
    padding:8px 4px;
    background:#ecf0f1;
    border-radius:6px;
  }
  .split-arrival { 
    text-align:center; 
    font-size:12px;
    padding:8px 4px;
    background:#e8f5e9;
    border-radius:6px;
  }
  
  .race-info-time{font-size:28px;} 
  .split-times{padding:15px;}
}

@media(max-width:480px){ 
  .header h1{font-size:20px;} 
  .header .runner-icon{font-size:28px;} 
  .container{padding:15px;}
  .split-times h3{font-size:15px;}
}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <span class="runner-icon">üèÉ‚Äç‚ôÇÔ∏è</span>
    <h1>francisco.running</h1>
  </div>

  <div class="section">
    <h2 class="section-title">Calculateur de temps de passage</h2>

    <div class="input-row">
      <div class="input-group">
        <label>Distance de course</label>
        <span class="helper-text">S√©lectionnez votre objectif de course</span>
        <select id="distance">
          <option value="" disabled selected>S√©lectionner une distance</option>
          <option value="10000">10 km</option>
          <option value="21097.5">Semi-marathon</option>
          <option value="42195">Marathon</option>
          <option value="other">Autre distance</option>
        </select>
        <input type="text" id="customDistance" class="custom-distance" placeholder="Distance en km (ex: 8.15 ou 8,15)">
      </div>
    </div>

    <div class="input-group">
      <label>Temps objectif</label>
      <span class="helper-text">D√©finissez votre temps cible</span>
      <div class="time-input-container">
        <div class="time-input-group">
          <span class="time-input-label">Heures</span>
          <select id="hoursInput" class="time-select">
            <!-- Options g√©n√©r√©es par JavaScript -->
          </select>
        </div>
        <span class="time-separator">:</span>
        <div class="time-input-group">
          <span class="time-input-label">Minutes</span>
          <select id="minutesInput" class="time-select">
            <!-- Options g√©n√©r√©es par JavaScript -->
          </select>
        </div>
        <span class="time-separator">:</span>
        <div class="time-input-group">
          <span class="time-input-label">Secondes</span>
          <select id="secondsInput" class="time-select">
            <!-- Options g√©n√©r√©es par JavaScript -->
          </select>
        </div>
      </div>
    </div>

    <div class="start-time-section">
      <label>Heure de d√©part (optionnel)</label>
      <span class="helper-text">D√©finissez l'heure de d√©part pour calculer les heures d'arriv√©e</span>
      <div class="time-input-container">
        <div class="time-input-group">
          <span class="time-input-label">Heures</span>
          <select id="startHoursInput" class="time-select">
            <!-- Options g√©n√©r√©es par JavaScript -->
          </select>
        </div>
        <span class="time-separator">:</span>
        <div class="time-input-group">
          <span class="time-input-label">Minutes</span>
          <select id="startMinutesInput" class="time-select">
            <!-- Options g√©n√©r√©es par JavaScript -->
          </select>
        </div>
        <span class="time-separator">:</span>
        <div class="time-input-group">
          <span class="time-input-label">Secondes</span>
          <select id="startSecondsInput" class="time-select">
            <!-- Options g√©n√©r√©es par JavaScript -->
          </select>
        </div>
      </div>
    </div>

    <div class="error-message" id="errorMessage"></div>

    <button onclick="calculate()">Calculer les temps de passage</button>
    <button class="secondary" onclick="clearResults()">Effacer les r√©sultats</button>

    <!-- Nouveaux boutons CTA -->
    <div class="cta-buttons">
      <button class="cta-instagram" onclick="window.open('https://www.instagram.com/francisco.running/', '_blank')">
        üì∏ Suivez-moi sur Instagram
      </button>
      <button class="cta-email" onclick="window.location.href='mailto:info@performancerunning.ch?subject=Demande de plan d\'entrainement'">
        üìß Plan d'entra√Ænement personnalis√©
      </button>
    </div>
  </div>

  <div class="results" id="results">
    <div class="race-info">
      <div class="race-info-distance" id="raceDistance">--</div>
      <div class="race-info-time" id="raceTime">--</div>
      <div class="race-info-pace" id="racePace">Allure moyenne : --</div>
    </div>

    <div class="split-times">
      <h3>‚è±Ô∏è Temps de passage</h3>
      <div class="split-header">
        <div class="split-header-item">Km</div>
        <div class="split-header-item">Temps</div>
        <div class="split-header-item">Heure</div>
      </div>
      <div id="splitTimes"></div>
    </div>
  </div>
</div>

<script>
// Initialisation des menus d√©roulants de temps
function initializeTimeSelects() {
  const hoursSelect = document.getElementById('hoursInput');
  const minutesSelect = document.getElementById('minutesInput');
  const secondsSelect = document.getElementById('secondsInput');

  // Heures (0-10 pour la plupart des courses)
  for(let i = 0; i <= 10; i++) {
    const option = document.createElement('option');
    option.value = i;
    option.textContent = i.toString().padStart(2, '0');
    hoursSelect.appendChild(option);
  }

  // Minutes (0-59)
  for(let i = 0; i <= 59; i++) {
    const option = document.createElement('option');
    option.value = i;
    option.textContent = i.toString().padStart(2, '0');
    minutesSelect.appendChild(option);
  }

  // Secondes (0-59)
  for(let i = 0; i <= 59; i++) {
    const option = document.createElement('option');
    option.value = i;
    option.textContent = i.toString().padStart(2, '0');
    secondsSelect.appendChild(option);
  }

  // Initialisation de l'heure de d√©part
  const startHoursSelect = document.getElementById('startHoursInput');
  const startMinutesSelect = document.getElementById('startMinutesInput');
  const startSecondsSelect = document.getElementById('startSecondsInput');

  // Heures de d√©part (0-23)
  for(let i = 0; i <= 23; i++) {
    const option = document.createElement('option');
    option.value = i;
    option.textContent = i.toString().padStart(2, '0');
    startHoursSelect.appendChild(option);
  }

  // Minutes de d√©part (0-59)
  for(let i = 0; i <= 59; i++) {
    const option = document.createElement('option');
    option.value = i;
    option.textContent = i.toString().padStart(2, '0');
    startMinutesSelect.appendChild(option);
  }

  // Secondes de d√©part (0-59)
  for(let i = 0; i <= 59; i++) {
    const option = document.createElement('option');
    option.value = i;
    option.textContent = i.toString().padStart(2, '0');
    startSecondsSelect.appendChild(option);
  }
}

// Appel de l'initialisation au chargement
initializeTimeSelects();

// Gestion de l'affichage du champ distance personnalis√©e
const distanceSelect = document.getElementById('distance');
const customDistanceInput = document.getElementById('customDistance');

distanceSelect.addEventListener('change', function() {
  if(this.value === 'other') {
    customDistanceInput.style.display = 'block';
  } else {
    customDistanceInput.style.display = 'none';
  }
});

// Fonction pour afficher les erreurs
function showError(message) {
  const errorDiv = document.getElementById('errorMessage');
  errorDiv.textContent = message;
  errorDiv.classList.add('show');
  document.getElementById('results').classList.remove('show');
}

function hideError() {
  document.getElementById('errorMessage').classList.remove('show');
}

function formatTime(s){ 
  const h=Math.floor(s/3600), m=Math.floor((s%3600)/60), sec=Math.round(s%60); 
  return h>0?`${h}h${m.toString().padStart(2,'0')}'${sec.toString().padStart(2,'0')}"`:`${m}'${sec.toString().padStart(2,'0')}"`;
}

function formatPace(sPerKm){ 
  const m=Math.floor(sPerKm/60), sec=Math.round(sPerKm%60); 
  return `${m}:${sec.toString().padStart(2,'0')}`; 
}

function formatDistance(meters) {
  if (meters >= 1000) {
    const km = meters / 1000;
    return km % 1 === 0 ? `${km} km` : `${km.toFixed(2)} km`;
  }
  return `${meters} m`;
}

function getDistanceName(distance) {
  if (distance === 10000) return '10 km';
  if (distance === 21097.5) return 'Semi-marathon';
  if (distance === 42195) return 'Marathon';
  return formatDistance(distance);
}

// Calculer l'heure d'arriv√©e
function calculateArrivalTime(startHour, startMinute, startSecond, elapsedSeconds) {
  const startTotalSeconds = startHour * 3600 + startMinute * 60 + startSecond;
  const arrivalTotalSeconds = startTotalSeconds + elapsedSeconds;
  
  const hours = Math.floor(arrivalTotalSeconds / 3600) % 24;
  const minutes = Math.floor((arrivalTotalSeconds % 3600) / 60);
  const seconds = Math.floor(arrivalTotalSeconds % 60);
  
  return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
}

// G√©n√©rer les points de passage automatiques
function generateSplitPoints(distanceMeters) {
  const distanceKm = distanceMeters / 1000;
  let splits = [];
  
  if(distanceKm <= 5) {
    // Pour distances courtes (‚â§5km): tous les 1km
    for(let i = 1; i <= Math.floor(distanceKm); i++) {
      splits.push(i * 1000);
    }
  } else if(distanceKm <= 15) {
    // Pour distances moyennes (5-15km): tous les 2.5km ou 5km
    for(let i = 2.5; i < distanceKm; i += 2.5) {
      splits.push(i * 1000);
    }
  } else {
    // Pour longues distances (>15km): tous les 5km
    for(let i = 5; i < distanceKm; i += 5) {
      splits.push(i * 1000);
    }
  }
  
  // Toujours ajouter la distance finale
  splits.push(distanceMeters);
  
  return splits;
}

function calculate(){
  hideError();
  
  let distance;
  
  if(distanceSelect.value === 'other') {
    // R√©cup√©rer la distance personnalis√©e et remplacer virgule par point
    const customValue = customDistanceInput.value.replace(',', '.');
    const distanceKm = parseFloat(customValue);
    
    if(isNaN(distanceKm) || distanceKm <= 0) {
      showError('Entrez une distance valide (ex: 8.15 ou 8,15)');
      return;
    }
    
    distance = distanceKm * 1000; // Convertir en m√®tres
  } else {
    distance = parseFloat(distanceSelect.value);
    
    if(!distanceSelect.value || distanceSelect.value===''){
      showError('Veuillez s√©lectionner une distance');
      return;
    }
  }

  const hours = parseInt(document.getElementById('hoursInput').value) || 0;
  const minutes = parseInt(document.getElementById('minutesInput').value) || 0;
  const seconds = parseInt(document.getElementById('secondsInput').value) || 0;
  
  const totalSec = hours*3600 + minutes*60 + seconds;
  
  if(totalSec===0){ 
    showError('Entrez un temps valide'); 
    return; 
  }

  // R√©cup√©ration de l'heure de d√©part
  const startHour = parseInt(document.getElementById('startHoursInput').value) || 0;
  const startMinute = parseInt(document.getElementById('startMinutesInput').value) || 0;
  const startSecond = parseInt(document.getElementById('startSecondsInput').value) || 0;
  const hasStartTime = startHour !== 0 || startMinute !== 0 || startSecond !== 0;

  // Calcul de l'allure moyenne (en secondes par km)
  const avgPacePerKm = totalSec / (distance / 1000);

  // G√©n√©rer les points de passage
  const splitPoints = generateSplitPoints(distance);

  // Affichage des informations de course
  document.getElementById('raceDistance').textContent = getDistanceName(distance);
  document.getElementById('raceTime').textContent = formatTime(totalSec);
  document.getElementById('racePace').textContent = `Allure moyenne : ${formatPace(avgPacePerKm)}/km`;

  // Calcul et affichage des temps de passage
  let html = '';
  splitPoints.forEach(splitDist => {
    const splitTime = (splitDist / 1000) * avgPacePerKm;
    
    let arrivalTimeHtml = '';
    if(hasStartTime) {
      const arrivalTime = calculateArrivalTime(startHour, startMinute, startSecond, splitTime);
      arrivalTimeHtml = `<div class="split-arrival">${arrivalTime}</div>`;
    } else {
      arrivalTimeHtml = `<div class="split-arrival">--</div>`;
    }
    
    html += `<div class="split-item">
      <div class="split-distance">${formatDistance(splitDist)}</div>
      <div class="split-time">${formatTime(splitTime)}</div>
      ${arrivalTimeHtml}
    </div>`;
  });
  
  document.getElementById('splitTimes').innerHTML = html;
  document.getElementById('results').classList.add('show');
  document.getElementById('results').scrollIntoView({behavior:'smooth', block:'nearest'});
}

function clearResults() {
  hideError();
  document.getElementById('results').classList.remove('show');
  document.getElementById('hoursInput').selectedIndex = 0;
  document.getElementById('minutesInput').selectedIndex = 0;
  document.getElementById('secondsInput').selectedIndex = 0;
  document.getElementById('distance').selectedIndex = 0;
  document.getElementById('customDistance').value = '';
  document.getElementById('customDistance').style.display = 'none';
  document.getElementById('startHoursInput').selectedIndex = 0;
  document.getElementById('startMinutesInput').selectedIndex = 0;
  document.getElementById('startSecondsInput').selectedIndex = 0;
}
</script>
</body>
</html>
